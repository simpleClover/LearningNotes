# 第4章-复合类型

## 4.1 数组

数组是一种能够储存多个相同类型的值的数据格式。每个值都储存在一个独立的数组元素中，计算机在内存中依次存储数组的各个元素

要创建数组应声明：
- 存储在每个元素之中的值的类型
- 数组名
- 数组中的元素数

声明数组通用模板：  
`typeName arrayName[arraySize];`  
`arraySize`指定元素数目，它必须是整型常数或const值，也可以是常量表达式

C++数组从0开始编号，例如`short months[12];`中，`months[0]`是第一个元素`months[11]`是最后一个元素

### 4.1.1 数组初始化

C++允许在声明语句中初始化数组元素，例如`int yamcosts[3] = {20, 30, 5};`  
只需提供一个用逗号隔开的值列表（初始化列表），并将其用花括号括起。如果没有初始化函数中定义的数组，则其元素值是不确定的

将`sizeof`运算符应用于数组名，得到的将是整个数组中的字节数。但如果应用到数组元素，则得到的是数组元素的长度

### 4.1.2 数组的初始化规则

只有在定义数组的时候才能使用初始化，此后就不能使用了，也不能将一个数组赋值给另一个数组
```cpp
int cards[4] = {3, 6, 8, 10};   // okay
int hands[4];                   // okay
hands[4] = {5, 6, 7, 8};        // not allowed
hands = cards;                  // not allowed
```

初始化数组的时候，可以使用少于数组长度的元素数目，例如
```cpp
float hotelTips[5] = {5.0, 2.5};
```
如果只对一部分初始化，那么其余元素将被设置为0。因此，如果想要将数组中的所有元素初始化为0，只需要显式地将第一个元素初始化为0，然后让编译器将其他元素都初始化为0即可
```cpp
long totals[500] = {0};
```

如果初始化数组时方括号`[]`内为空，C++编译器将自动计算元素个数
```cpp
short things[] = {1, 5, 3, 8};
```
编译器将使`things`数组包含4个元素

### 4.1.3 C++数组初始化方法

C++11中列表初始化新增了一些功能
- 初始化数组时可省略等号`=`
    ```cpp
    double earnings[4] {1.2e4, 1.6e4, 1.1e4, 1.7e4}; 
    ```
- 可不在大括号内包含任何东西，并将所有元素设为0
    ```cpp
    unsigned int counts[10] = {};
    float balances[100] {};
    ```
- 列表初始化禁止缩窄转换
    ```cpp
    long plifs[] = {25, 92, 3.0};               // not allowed
    char slifs[4] {'h', 'i', 1122011, '\0'};    // not allowed
    chae tlifs[4] {'h', 'i', 112, '\0'};        // allowed
    ```
